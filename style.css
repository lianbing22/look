/* 1. Reset/Base Styles */
:root {
    --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --font-family-monospace: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;

    --color-primary: #1a73e8; /* Google Blue */
    --color-primary-dark: #1259b8;
    --color-accent: #188038; /* Google Green for accents if needed */
    --color-text-primary: #202124; /* Dark Gray for text */
    --color-text-secondary: #5f6368; /* Medium Gray for secondary text */
    --color-background: #ffffff; /* White background */
    --color-surface: #f8f9fa; /* Light gray for surfaces like cards or sections */
    --color-border: #dadce0;
    --color-error: #d93025; /* Google Red */
    --color-success: #1e8e3e; /* Google Green */

    --spacing-unit: 8px;
    --border-radius: 4px;
    --header-height: 64px;
    --max-content-width: 1200px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 16px; /* Base font size */
    -webkit-text-size-adjust: 100%;
}

body {
    font-family: var(--font-family-sans);
    line-height: 1.6;
    color: var(--color-text-primary);
    background-color: var(--color-background);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* 2. Typography & General Elements */
h1, h2, h3, h4, h5, h6 {
    font-weight: 500;
    line-height: 1.2;
    margin-bottom: calc(var(--spacing-unit) * 2);
}
h1 { font-size: 1.75rem; } /* ~28px */
h2 { font-size: 1.25rem; } /* ~20px */
h3 { font-size: 1.125rem; } /* ~18px */

p {
    margin-bottom: calc(var(--spacing-unit) * 2);
}

a {
    color: var(--color-primary);
    text-decoration: none;
}
a:hover {
    color: var(--color-primary-dark);
    text-decoration: underline;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
}

.material-icons {
    font-family: 'Material Icons';
    font-weight: normal;
    font-style: normal;
    font-size: 24px; /* Preferred icon size */
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    -webkit-font-feature-settings: 'liga';
    -webkit-font-smoothing: antialiased;
    vertical-align: middle; /* Align icons with text nicely */
}

/* Utility class from previous attempts, keep it */
.hidden {
    display: none !important;
}

/* 3. Layout (Header, Main, Footer, Sections) */
.app-header {
    background-color: var(--color-background);
    border-bottom: 1px solid var(--color-border);
    height: var(--header-height);
    position: sticky;
    top: 0;
    z-index: 100;
}

.app-header__container {
    max-width: var(--max-content-width);
    margin: 0 auto;
    padding: 0 calc(var(--spacing-unit) * 2);
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
}

.app-header__title {
    font-size: 1.25rem; /* ~20px */
    font-weight: 500;
    color: var(--color-text-primary);
    margin: 0;
}

.app-header__nav-link {
    color: var(--color-text-secondary);
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius);
    font-weight: 500;
    text-decoration: none;
    transition: background-color 0.2s ease-in-out;
}
.app-header__nav-link:hover {
    background-color: rgba(0,0,0,0.05);
    color: var(--color-text-primary);
    text-decoration: none;
}
.app-header__nav-link.active {
    color: var(--color-primary);
    /* background-color: rgba(var(--color-primary-rgb), 0.1); /* Optional light background for active */
}

.app-main {
    flex-grow: 1;
    padding: calc(var(--spacing-unit) * 3) calc(var(--spacing-unit) * 2);
    max-width: var(--max-content-width);
    width: 100%;
    margin: 0 auto;
    display: grid; /* Using grid for overall layout of sections */
    grid-template-columns: 1fr; /* Default single column */
    gap: calc(var(--spacing-unit) * 3);
}

/* For larger screens, maybe a two-column layout */
@media (min-width: 960px) {
    .app-main {
        grid-template-columns: 2fr 1fr; /* Camera/Controls on left, Results on right */
        grid-template-areas:
            "camera controls"
            "camera results";
    }
    .app-section--camera { grid-area: camera; }
    .app-section--controls { grid-area: controls; }
    .app-section--results { grid-area: results; }
}

.app-section {
    /* Common styling for sections, can be enhanced with borders or backgrounds */
}

.app-footer {
    text-align: center;
    padding: calc(var(--spacing-unit) * 2);
    font-size: 0.875rem; /* ~14px */
    color: var(--color-text-secondary);
    border-top: 1px solid var(--color-border);
}
.app-footer p {
    margin-bottom: var(--spacing-unit);
}

/* 4. Components */

/* Camera View */
.camera-view {
    width: 100%;
}
.camera-view__container { /* This is #cameraContainer */
    position: relative;
    width: 100%;
    aspect-ratio: 16/9;
    background-color: #000;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
#video, #canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
#video { object-fit: cover; z-index: 1; }
#canvas { z-index: 2; }

.camera-placeholder { /* This is #cameraPlaceholder */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    z-index: 5;
    text-align: center;
    gap: calc(var(--spacing-unit) * 2);
}
.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Controls Bar */
.controls-bar { /* This is #controlsBar */
    display: flex;
    flex-wrap: wrap; /* Allow wrapping on small screens */
    gap: calc(var(--spacing-unit) * 2);
    align-items: center;
    padding: var(--spacing-unit);
    background-color: var(--color-surface);
    border-radius: var(--border-radius);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
.control-button {
    font-family: var(--font-family-sans);
    font-size: 0.875rem; /* ~14px */
    font-weight: 500;
    padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    background-color: var(--color-background);
    color: var(--color-primary);
    cursor: pointer;
    text-align: center;
    transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-unit); /* Space for icon and text */
}
.control-button:hover {
    background-color: rgba(0,0,0,0.03);
    border-color: #c6c6c6;
}
.control-button:active {
    background-color: rgba(0,0,0,0.05);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}
.control-button:disabled {
    color: rgba(0,0,0,0.38);
    background-color: rgba(0,0,0,0.05);
    border-color: var(--color-border);
    cursor: not-allowed;
    box-shadow: none;
}
.control-button--icon .material-icons {
    font-size: 20px; /* Slightly smaller icon for buttons */
}
/* Specific button colors if needed */
#startBtn { background-color: var(--color-primary); color: white; border-color: var(--color-primary); }
#startBtn:hover { background-color: var(--color-primary-dark); border-color: var(--color-primary-dark); }
#stopBtn { background-color: var(--color-error); color: white; border-color: var(--color-error); }
#stopBtn:hover { background-color: #b0241a; border-color: #b0241a; }


/* Results Area */
.results-area { /* This is #resultsArea */
    padding: calc(var(--spacing-unit) * 2);
    background-color: var(--color-surface);
    border-radius: var(--border-radius);
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
.results-area__title {
    font-size: 1.125rem; /* ~18px */
    color: var(--color-text-primary);
    margin-bottom: calc(var(--spacing-unit) * 2);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.history-link {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-primary);
    display: inline-flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.5);
}
.history-link:hover {
    color: var(--color-primary-dark);
    text-decoration: none;
}
.predictions-list { /* This is #predictions */
    display: flex;
    flex-direction: column;
    gap: var(--spacing-unit);
}
.prediction-item { /* Style for individual prediction items */
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    background-color: var(--color-background);
    font-size: 0.875rem;
    /* Add structure for icon, label, score if needed from original script.js logic */
    display: flex;
    align-items: center;
    gap: var(--spacing-unit);
}
.category-icon { font-size: 1.2rem; } /* From script.js */
.prediction-details { flex: 1; }
.prediction-label { font-weight: 500; }
.prediction-score { font-size: 0.8rem; color: var(--color-text-secondary); }


/* History Panel */
.history-panel { /* This is #historyPanel */
    position: fixed;
    top: 0;
    right: -360px; /* Hidden by default */
    width: 350px;
    height: 100%;
    background-color: var(--color-background);
    box-shadow: -2px 0 5px rgba(0,0,0,0.1);
    z-index: 200;
    transition: right 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
    padding: calc(var(--spacing-unit) * 2);
}
.history-panel.active {
    right: 0;
}
.history-panel__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(var(--spacing-unit) * 2);
    padding-bottom: var(--spacing-unit);
    border-bottom: 1px solid var(--color-border);
}
.history-panel__header h3 { margin: 0; }
.history-panel__content { /* This is #historyContent */
    flex-grow: 1;
    overflow-y: auto;
}
.history-empty {
    color: var(--color-text-secondary);
    text-align: center;
    padding: calc(var(--spacing-unit) * 2) 0;
}
.history-item { /* Structure from script.js */
    padding: var(--spacing-unit);
    margin-bottom: var(--spacing-unit);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
}
.history-item-image { max-width: 100px; margin-bottom: var(--spacing-unit); } /* Example style */
.history-panel__clear-button { /* This is #historyClearBtn */
    margin-top: calc(var(--spacing-unit) * 2);
    width: 100%;
    padding: calc(var(--spacing-unit) * 1.25);
    background-color: var(--color-error);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    font-weight: 500;
    cursor: pointer;
}
.history-panel__clear-button:hover { background-color: #b0241a; }

/* Icon Button (for close buttons) */
.icon-button {
    background: none;
    border: none;
    color: var(--color-text-secondary);
    cursor: pointer;
    padding: var(--spacing-unit);
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}
.icon-button:hover {
    background-color: rgba(0,0,0,0.05);
    color: var(--color-text-primary);
}

/* Help Overlay */
.help-overlay { /* This is #helpOverlay */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    z-index: 300;
    display: none; /* Hidden by default, JS will toggle */
    align-items: center;
    justify-content: center;
    padding: calc(var(--spacing-unit) * 2);
}
.help-overlay__content {
    background-color: var(--color-background);
    padding: calc(var(--spacing-unit) * 3);
    border-radius: var(--border-radius);
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    max-width: 600px;
    width: 100%;
    position: relative;
}
.help-overlay__close-button {
    position: absolute;
    top: var(--spacing-unit);
    right: var(--spacing-unit);
}

/* Save Dialog */
.save-dialog {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); display: none; /* Hidden by default */
    align-items: center; justify-content: center; z-index: 300;
}
.save-dialog.active { display: flex; }
.save-dialog-content {
    background: var(--color-background); padding: calc(var(--spacing-unit) * 3);
    border-radius: var(--border-radius); max-width: 400px; width: 90%;
}
.save-preview { width: 100%; height: auto; max-height: 200px; object-fit: contain; margin-bottom: var(--spacing-unit); border: 1px solid var(--color-border); }
.save-form-group { margin-bottom: var(--spacing-unit) * 2; }
.save-form-group label { display: block; margin-bottom: var(--spacing-unit); font-weight: 500; }
.save-form-group input { width: 100%; padding: var(--spacing-unit); border: 1px solid var(--color-border); border-radius: var(--border-radius); }
.save-dialog-actions { display: flex; justify-content: flex-end; gap: var(--spacing-unit); }
.save-dialog-btn { /* Use .control-button styles or define new */
    padding: calc(var(--spacing-unit)*1) calc(var(--spacing-unit)*2);
    border-radius: var(--border-radius); border: 1px solid var(--color-border);
    cursor: pointer; font-weight: 500;
}
.save-dialog-btn.save { background-color: var(--color-primary); color: white; border-color: var(--color-primary); }
.save-dialog-btn.cancel { background-color: transparent; color: var(--color-text-secondary); }


/* 5. Responsive Adjustments (Media Queries) */
@media (max-width: 959px) { /* Tablet and Mobile */
    .app-main {
        padding: calc(var(--spacing-unit) * 2);
        gap: calc(var(--spacing-unit) * 2);
    }
    .app-section--controls { order: 1; } /* Move controls below camera on smaller screens if not using grid areas for this */
    .app-section--camera { order: 2; }
    .app-section--results { order: 3; }
}

@media (max-width: 600px) { /* Mobile */
    .app-header__container {
        padding: 0 var(--spacing-unit);
        flex-direction: column;
        height: auto;
        padding-bottom: var(--spacing-unit);
    }
    .app-header__title { margin-bottom: var(--spacing-unit); margin-top: var(--spacing-unit); }
    .app-header__nav { width: 100%; display: flex; justify-content: space-around; }
    .app-header__nav-link { padding: var(--spacing-unit); flex-grow: 1; text-align: center;}

    .app-main {
        padding: var(--spacing-unit);
    }

    .controls-bar {
        flex-direction: column; /* Stack buttons vertically */
    }
    .control-button {
        width: 100%; /* Make buttons full width in column */
    }

    .results-area__title {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-unit);
    }
    
    .history-panel {
        width: 100%;
        right: -100%; /* Full width slide-in */
    }
}
